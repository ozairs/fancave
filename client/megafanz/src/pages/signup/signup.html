<ion-header>
  <ion-navbar color="primary">
    <ion-title>
      Signup
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <div >
    <h2>
      <img src="assets/img/megafanz-logo-64.png" alt="logo" style=" display: block; margin-left: auto; margin-right: auto;"
        (click)="home()">
    </h2>
  </div>
  <form [formGroup]="signupForm" novalidate>
    <ion-list>
      <ion-item class="background" *ngIf="signupPage.error != ''">
        <p ion-text color="danger" >
          {{signupPage.error}}
        </p>
      </ion-item>

      <ion-item>
        <ion-label stacked color="primary" style="font-size: larger">First name</ion-label>
        <ion-input formControlName="firstName" type="text">
        </ion-input>
      </ion-item>
      <p class="background" ion-text color="danger" *ngIf="!signupForm.controls.firstName.valid  && signupForm.controls.firstName.dirty">
        First Name is required.
      </p>

      <ion-item>
        <ion-label stacked color="primary" style="font-size: larger">Last name</ion-label>
        <ion-input formControlName="lastName" type="text">
        </ion-input>
      </ion-item>
      <p class="background" ion-text color="danger" *ngIf="!signupForm.controls.lastName.valid  && signupForm.controls.lastName.dirty">
        Last Name is required.
      </p>

      <ion-item>
        <ion-label stacked color="primary" style="font-size: larger">Email</ion-label>
        <ion-input formControlName="username" type="text" spellcheck="false" autocapitalize="off">
        </ion-input>
      </ion-item>
      <p ion-text color="danger" *ngIf="!signupForm.controls.username.valid  && signupForm.controls.username.dirty">
        Username is required.
      </p>

      <ion-item>
        <ion-label stacked color="primary" style="font-size: larger">Password</ion-label>
        <ion-input formControlName="password" type="password" (ionFocus)="signupPage.error = '';">
        </ion-input>
      </ion-item>
      <p ion-text color="danger" *ngIf="signupForm.controls.password.errors && signupForm.controls.password.errors.required  && signupForm.controls.password.dirty">
        Password is required.
      </p>
      <p ion-text color="danger" *ngIf="signupForm.controls.password.errors && signupForm.controls.password.errors.bad_password && signupForm.controls.password.dirty && !signupForm.controls.password.errors.required">
        Password not strong enough.
      </p>
      <ion-item>
        <ion-label stacked color="primary" style="font-size: larger">Confirm Password</ion-label>
        <ion-input formControlName="password2" type="password">
        </ion-input>
      </ion-item>
      <p ion-text color="danger" *ngIf="!signupForm.controls.password2.valid && signupForm.controls.password.dirty && signupForm.controls.password2.dirty">
        Passwords do not match.
      </p>
      <ion-item >
        <ng2-password-strength-bar [passwordToCheck]="signupForm.controls.password.value" [barLabel]="'Password strength:'">
        </ng2-password-strength-bar>
      </ion-item>

    </ion-list>

    <ion-row responsive-sm>
      <ion-col>
        <button color="primary" type="submit" ion-button (click)="signup()" [disabled]="!signupForm.valid" block>Create</button>
      </ion-col>
    </ion-row>
  </form>
</ion-content>